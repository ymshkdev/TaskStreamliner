/* リセットCSS */
* {
  box-sizing: border-box;
}

html,
body,
ul,
li,
h1,
h2,
p,
div {
  margin: 0;
  padding: 0;
}

body {
  font-family: "Noto Sans JP", "Hiragino Kaku Gothic ProN W3", sans-serif;
  color: #3b4043;
}

li {
  list-style: none;
}

img {
  max-width: 100%;
  vertical-align: bottom;
}

a {
  text-decoration: none;
  color: #3b4043;
}

/* ログインフォームの簡易的な装飾 */
.field {
  margin-bottom: 15px;
}

.field input {
  width: 100%;
  padding: 10px;
  border: 1px solid #d1d1d1;
  border-radius: 4px;
}

.submit-btn {
  background-color: #3b4043;
  color: white;
  padding: 10px 20px;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

.submit-btn:hover {
  background-color: #5a5f63;
}


/* 全体のレイアウト */
.google-calendar-layout {
  display: flex;
  height: 100vh;
  overflow: hidden;
  background: white;
}

/* 左側サイドバー (幅固定) */
.sidebar {
  width: 280px;
  border-right: 1px solid #dadce0;
  display: flex;
  flex-direction: column;
  height: 100vh; /* 画面の高さに固定 */
  padding: 10px;
  background-color: #fff;
}

/* ミニカレンダーを小さくする */
/* 1. カレンダーセクションをコンパクトに */
.mini-calendar-section {
  flex-shrink: 0; /* カレンダーが縦に潰されるのを防ぐ */
  margin-bottom: 20px;
}

.mini-calendar-section .simple-calendar {
  border: none;
}

/* セルの高さを35pxに固定してギュッと縮める */
.mini-calendar-section .simple-calendar td {
  height: 35px !important;
  padding: 0 !important;
  vertical-align: middle;
  border: none !important;
  text-align: center;
}

.mini-calendar-section .simple-calendar th {
  padding: 5px 0 !important;
  font-size: 0.75rem;
  border: none !important;
  color: #70757a;
}

/* 日付の数字を丸く囲む設定などは維持 */
.mini-day-cell a {
  text-decoration: none;
  color: #3c4043;
  display: block;
  width: 28px;
  height: 28px;
  line-height: 28px;
  margin: 0 auto;
}

.active-day {
  background-color: #d2e3fc;
  border-radius: 50%;
}

.active-day a {
  color: #1a73e8 !important;
  font-weight: bold;
}

/* 2. 未完了タスクセクションを救出 */
.todo-sidebar-section {
  flex-grow: 1;      /* カレンダーの下の余ったスペースをすべて使う */
  overflow-y: auto;  /* タスクが増えたらこのエリアだけスクロール */
  border-top: 1px solid #f1f3f4;
  padding-top: 10px;
}

.sidebar-title {
  font-size: 0.9rem;
  font-weight: bold;
  margin-bottom: 10px;
  color: #3c4043;
}

.todo-item {
  font-size: 0.85rem;
  padding: 8px 0;
  border-bottom: 1px solid #f1f3f4;
  display: flex;
  align-items: center;
}

/* 右側メイン */
.main-content {
  flex-grow: 1;
  display: flex;
  flex-direction: column;
}

.timeline-header {
  padding: 10px 20px;
  border-bottom: 1px solid #dadce0;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

/* タイムライン本体 */
.day-timeline {
  flex-grow: 1;
  overflow-y: scroll;
  position: relative;
}

.hour-row {
  display: flex;
  height: 60px; /* 1時間を60pxに固定 */
  border-bottom: 1px solid #e8eaed;
}

.hour-label {
  width: 60px;
  font-size: 11px;
  color: #70757a;
  text-align: right;
  padding-right: 8px;
  margin-top: -6px;
}

/* 予定ブロック */
.events-container { position: absolute; top: 0; left: 60px; right: 20px; bottom: 0; pointer-events: none; }
.event-block {
  position: absolute; width: 90%;
  background: #039be5; color: white;
  border-radius: 4px; padding: 4px 8px;
  font-size: 12px; pointer-events: auto;
}
.deadline-line {
  position: absolute; width: 100%;
  border-top: 2px solid #ea4335;
  z-index: 5;
}
.deadline-text { background: #ea4335; color: white; font-size: 10px; padding: 0 4px; }

/* --- サイドバー内カレンダーヘッダーの完全修正 --- */

.sidebar .simple-calendar .calendar-heading {
  display: flex !important;
  flex-direction: row !important;
  justify-content: center !important; /* 中央寄せに変更して間隔を微調整 */
  align-items: center !important;
  width: 100% !important;
  padding: 5px 0 !important;
  margin: 0 !important;
  gap: 5px !important; /* 要素同士の隙間を最小限にする */
}

/* 年月表示のフォントを少し小さくし、左右の余白を完全にゼロにする */
.sidebar .simple-calendar .calendar-title {
  font-size: 0.9rem !important; /* 1remから0.9remに下げて幅を確保 */
  font-weight: bold !important;
  margin: 0 !important;
  padding: 0 !important;
  white-space: nowrap !important;
  flex-shrink: 1 !important; /* スペースが足りない時に縮むのを許可 */
  text-align: center;
}

/* ボタンの文字を「前月/次月」から「< / >」に縮小するか、余白をさらに削る */
.sidebar .simple-calendar .calendar-heading a.btn {
  padding: 2px 4px !important; /* 左右パディングをさらに削減 */
  font-size: 0.75rem !important;
  min-width: 35px !important; /* 最小幅をさらに縮小 */
  flex-shrink: 0 !important;
  letter-spacing: -1px; /* 文字間隔を詰めて幅を節約 */
}

/* サイドバー自体のパディングが邪魔をしている可能性があるので微調整 */
.sidebar {
  padding: 10px 5px !important; /* 左右の余白を10pxから5pxに減らす */
}

/* 1. Gemが生成する可能性のあるヘッダーを強制非表示 */
.mini-calendar-body .calendar-heading,
.mini-calendar-body .calendar-title,
.mini-calendar-body .btn {
  display: none !important;
}

/* 2. 新しく作ったヘッダーのスタイル（サイドバー幅にフィットさせる） */
.custom-calendar-header {
  display: flex !important;
  justify-content: space-between !important;
  align-items: center !important;
  padding: 5px 10px;
  margin-bottom: 10px;
}

.custom-calendar-header .nav-btn {
  text-decoration: none;
  font-size: 0.75rem;
  padding: 2px 8px;
  border: 1px solid #dadce0;
  border-radius: 4px;
  color: #3c4043;
  background: #fff;
}

.custom-calendar-header .calendar-title-js {
  font-size: 1rem;
  font-weight: bold;
  cursor: pointer; /* JSを動かすための目印 */
}

/* 土日祝の基本色 */
.text-danger {
  color: #d93025 !important; /* Googleカレンダー風の赤 */
}

.text-info {
  color: #1a73e8 !important; /* Googleカレンダー風の青 */
}

/* ミニカレンダーの日付リンクが青くなってしまうのを防ぐ */
.mini-day-cell a.text-danger { color: #d93025 !important; }
.mini-day-cell a.text-info { color: #1a73e8 !important; }

/* 選択中の日の背景色と文字色のコントラスト調整 */
.active-day {
  background-color: #e8f0fe;
  border-radius: 50%;
}

.select-jump {
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  outline: none;
  padding: 0 2px;
}

.select-jump::-ms-expand {
  display: none;
}

/* リンクのデフォルトデザインを解除 */
.event-link {
  text-decoration: none !important;
  color: inherit !important;
  display: block;
  height: 100%; /* 親の高さに合わせる */
  width: 100%;
}

/* 完了したタスクのスタイル */
.completed-task {
  opacity: 0.6; /* 全体を薄くする */
}

.completed-task .event-inner strong,
.completed-task .deadline-text {
  text-decoration: line-through; /* 横線を引く */
  color: #80868b; /* グレーにする */
}

/* ホバー時に少し浮き上がらせる（クリックできることを伝える） */
.event-link:hover {
  background-color: rgba(0, 0, 0, 0.03);
  transition: background 0.2s;
}