<div id="<%= dom_id(task) %>" class="task-entry <%= task.task_type %> <%= "status-#{task.status}" if task.todo? || task.schedule? %>" data-team-id="<%= task.teams.first&.id %>">
  <%# äºˆå®š (schedule) ã®å ´åˆï¼šæ™‚é–“ã‚’è¡¨ç¤º %>
  <% if task.schedule? && task.start_at.present? %>
    <span style="font-size: 0.8em; color: #666;">
     <% if task.start_at.to_date == task.end_at.to_date %>
      <%# 1. åŒæ—¥ã®å ´åˆï¼šé€šå¸¸é€šã‚Š 10:00 - 12:00 %>
      <%= task.start_at.strftime("%H:%M") %> - <%= task.end_at.strftime("%H:%M") %>
    <% else %>
      <%# 2. æ—¥ã‚’ã¾ãŸãå ´åˆ %>
      <% if date == task.start_at.to_date %>
        <span style="color: #007bff; font-weight: bold;">(å§‹)</span> <%= task.start_at.strftime("%H:%M") %>ã€œ
      <% elsif date == task.end_at.to_date %>
        ã€œ<%= task.end_at.strftime("%H:%M") %> <span style="color: #dc3545; font-weight: bold;">(çµ‚)</span>
      <% else %>
        <span style="color: #6c757d; font-weight: bold;">(ç¶™ç¶šä¸­)</span>
      <% end %>
    <% end %>
  </span>
<% end %>

  <%# ã‚¿ã‚¹ã‚¯ (todo) ã®å ´åˆï¼šã€†æ™‚é–“ã‚’è¡¨ç¤º %>
  <% if task.todo? && task.deadline.present? %>
    <div class="task-deadline-time" style="font-size: 0.75em; color: #d9534f; font-weight: bold; line-height: 1.2;">
      ã€† <%= task.deadline.strftime("%H:%M") %>
    </div>
  <% end %>

  <%# ã‚¿ã‚¤ãƒˆãƒ«éƒ¨åˆ† %>
  <%= link_to task_path(task), data: { turbo_frame: "modal_task_detail", action: "click->modal#open" }, class: "task-link" do %>
    <% if task.todo? && task.priority_high? %>
      <span title="å„ªå…ˆåº¦ï¼šé«˜">ðŸš©</span>
    <% end %>
    <%= task.title %>
  <% end %>
</div>